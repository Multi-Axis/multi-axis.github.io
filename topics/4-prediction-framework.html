<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Multi-Axis - Prediction Framework</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">Multi-Axis Documentation</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
            </div>
        </div>
        <div id="content">
            <h1>Prediction Framework</h1>
            <div class="info">
    
</div>

<p>A <strong>prediction unit</strong>, or a <strong>forecast unit</strong>, refers to an executable, say <code>my_regression_model.sh</code>, that must be named <code>$PWD/future_models/my_regression_model.sh</code>, where $PWD is the working directory where <code>habbix</code> is run.</p>
<h3 id="input">Input</h3>
<p>These units are invoked by <code>habbix sync</code>. In stdin, the unit receives a JSON object (dubbed as an <em>Event</em>):</p>
<pre><code>{ &quot;value_type&quot; : 0               // items.value_type (usually 0 or 3)
, &quot;clocks&quot; : [&lt;epochs&gt;]          // list of epoch times (x values)
, &quot;values&quot; : [&lt;values&gt;]          // y values
, &quot;last&quot;   : [&lt;epoch&gt;,&lt;value&gt;]   // (time, value) of last tick in history
, &quot;draw_future&quot; : [&lt;epochs&gt;]     // Requested value of &quot;clocks&quot;
, &quot;params&quot; :
  { &quot;stop_lower&quot;: &lt;epoch&gt;        // start of prediction range (negative
                                 // units relative to current time) (optional)
  , &quot;stop_upper&quot;: &lt;epoch&gt;        // End of prediction range in data (optional) 
  , &quot;predict_length&quot;: &lt;days&gt;     // User's requested length for predictions
                                    (saved in DB) (if null, default: one week)
  , ...                          // Extra forecast-unit specific params (optional)
  }
}</code></pre>
<p>Additionally, the name of the model is passed as the first command line parameter.</p>
<h3 id="output">Output</h3>
<p>In exchange, another JSON object (dubbed <em>Result</em>) is expected in the stdout:</p>
<pre><code>{ &quot;clocks&quot;  : [&lt;epochs&gt;]         // Extrapolated clock-value pairs
, &quot;values&quot;  : [...]
, &quot;details&quot; : {&lt;obj&gt;}            // Forecast-specific details (R^2 etc.), Format is free
}</code></pre>
<p>These <code>(clocks, values)</code> are inserted to the future of the original item.</p>
<p><code>clocks</code> is a list of epoch timestamps (numbers). <code>values</code> are also numbers (unsigned integers if <code>value_type == 3</code>, decimals with a precision of 4 (.1234) if <code>value_type == 0</code>).</p>
<p>stderr is ignored.</p>
<h2 id="add-predictions-to-habbix">Add predictions to habbix</h2>
<p><code>habbix configure -e &lt;file&gt;</code> registers the file <code>future_models/&lt;file&gt;</code> as a prediction unit and assigns it a model id.</p>
<p><code>habbix models</code> lists all registered models.</p>
<p><code>habbix configure -i itemid -m &lt;model&gt;</code></p>
<p><code>habbix sync --syncall</code> adds default item_futures to every item that does not have any with some rndm modelid taken from the model table (after syncing other zabbix tables to local db). Obviously adding the futures fails if no model had been registered. (the tables are copied though).</p>
<h2 id="run-predictions">Run predictions</h2>
<p><code>habbix execute -p '{...}' &lt;n&gt;</code></p>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
