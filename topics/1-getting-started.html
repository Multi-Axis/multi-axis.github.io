<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Multi-Axis - Getting Started</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">Multi-Axis Documentation</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
            </div>
        </div>
        <div id="content">
            <h1>Getting Started</h1>
            <div class="info">
    
</div>

<p>To get the database setup, simply configure <code>config.yaml</code> from habbix, possibly create the database (<code>createdb -O multi-axis multiaxis</code>) and then run <code>habbix migrate-db</code>.</p>
<p>Next you wil want to sync local “meta” (that is, all but history tables) tables from zabbix: <code>habbix sync-db -s</code>.</p>
<p>The history tables are rather large (over 300k rows <em>with a single server</em>), so it is not wise to sync all of them.</p>
<p>Now, the following may sound a bit confusing but please bear with me. Because <strong>history is coupled with future</strong>, you will need to define some means to predict the future before syncing the history. That is, some (“future-predicting!”) executable(s) in <code>$PWD/forecast_models</code>. For now you may want to copy or link the <code>linreg</code> binary from habbix:</p>
<pre><code> mkdir future_models
 cd future_models
 ln -s ~/.cabal/bin/linreg .</code></pre>
<p>Then register it in the database: <code>habbix add-model linreg</code>. Refer to section “Predictions” for more info on models.</p>
<p>Now you can register some items in the database. To see what items have any history, you can e.g. do something like this on the <strong>remote zabbix db</strong>:</p>
<pre><code>zabbix=&gt; select distinct itemid from history;
zabbix=&gt; select distinct itemid from history_uint;</code></pre>
<p>When you now the itemid you want to add (say, 20000), just say</p>
<pre><code>habbix new-future 20000 1</code></pre>
<p>The 1 specifies the model to use (see <code>habbix ls-models</code>).</p>
<p>Now you can synchronize the history from the remote db and predict the future:</p>
<pre><code>habbix sync-db</code></pre>
<p>(That syncs only histories and futures; if you have added new hosts, you will need to run habbix <code>sync-db -s</code> first.)</p>
<h2 id="optimizations">Optimizations</h2>
<pre><code>create index history_idx on history (itemid, clock);
create index trend_idx on trend (itemid, clock);
alter table trend drop column id;
alter table history drop column id;</code></pre>

        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
